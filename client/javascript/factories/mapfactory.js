cubeCrawler.factory('mapFactory',function (){
      var factory = {};
      var map = {};
      factory.initMap = function(enemies, callback) {
		  	map = [
      			{0: ['#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#']},
      			{1: ['|','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#']},
      			{2: ['#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#']},
      			{3: ['#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#']},
      			{4: ['#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#']},
      			{5: ['#','.','.','.','.','@','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#']},
      			{6: ['#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#']},
      			{7: ['#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#']},
      			{8: ['#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#']},
      			{9: ['#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#']},
      			{10: ['#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#']},
      			{11: ['#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#']},
      			{12: ['#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#']},
      			{13: ['#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#']},
      			{14: ['#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#']},
      			{15: ['#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#']},
     			{16: ['#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#']},
     			{17: ['#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#']},
     			{18: ['#','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','.','#']},
     			{19: ['#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#']}
      	];

       for (enemy in enemies) {
          var x = enemies[enemy]['x'];
          var y = enemies[enemy]['y'];
          map[y][y][x] = enemies[enemy].mapCharacter;
        } 
        
         
          callback(map);
        };

        factory.updatePlayerCoords = function(callback) {
        	callback(map);
        };

        factory.update = function(map,newx,newy,newchar, oldx,oldy,oldchar, callback) {
          map[newy][newy][newx] = oldchar;
          map[oldy][oldy][oldx] = newchar;
          callback(map);
        
      };

        factory.getMap = function(callback){
            callback(map);
          };
  
      return factory;
    });
		